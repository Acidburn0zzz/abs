# Port: print/texinfo

pkgname=texinfo
pkgver=6.3
pkgrel=1
pkgdesc="Utilities to work with and produce manuals, ASCII text, and on-line documentation from a single source file"
arch=('i386' 'amd64')
url="http://www.gnu.org/software/texinfo/"
license=('GPL3')
groups=('base-devel')
options=('!emptydirs')
depends=('perl' 'gettext-runtime')
makedepends=('help2man')
source=(ftp://ftp.gnu.org/pub/gnu/$pkgname/$pkgname-$pkgver.tar.xz{,.sig}
        "texinfo-install.hook"
        "texinfo-install.hook")
validpgpkeys=('EAF669B31E31E1DECBD11513DDBC579DAB37FBA9') # Gavin Smith
sha256sums=('246cf3ffa54985118ec2eea2b8d0c71b92114efe6282c2ae90d65029db4cf93a'
            'SKIP'
            '66ab7eab5ecdd7757081a743f94e6f4d2e783b61db5024344450748bf1bf8eb9'
            '66ab7eab5ecdd7757081a743f94e6f4d2e783b61db5024344450748bf1bf8eb9')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
  LDFLAGS="$LDFLAGS -lintl" \
  ./configure --prefix=/usr/local --without-included-gettext
  make
}

check() {
  make -C $pkgname-$pkgver check
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver}
  make DESTDIR=${pkgdir} install

  rm -rf "${pkgdir}/usr/local/lib/charset.alias"
  rm -rf "${pkgdir}/usr/local/share/info/dir"
}

# $Id: PKGBUILD 197983 2013-10-30 12:04:51Z allan $
# Maintainer: Jan Alexander Steffens (heftig) <jan.steffens@gmail.com>
# Contributor: György Balló <ballogy@freestart.hu>

pkgname=geoclue2
pkgver=2.1.7
pkgrel=2
pkgdesc="Modular geoinformation service built on the D-Bus messaging system."
arch=(i686 x86_64)
url="http://geoclue.freedesktop.org/"
license=(LGPL)
depends=(libsoup json-glib)
makedepends=(intltool geoip)
optdepends=('geoip: geoip-lookup server binary')
install=geoclue.install
source=(http://freedesktop.org/software/geoclue/releases/2.1/geoclue-$pkgver.tar.xz)
md5sums=('684ca62c4e7b13ebe419d66e5c2e493c')

build() {
  cd geoclue-$pkgver
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
    --libexecdir=/usr/lib/$pkgname --disable-static \
    --disable-3g-source \
    --disable-wifi-source \
    --disable-modem-gps-source
  gmake
}

package() {
  cd geoclue-$pkgver
  gmake DESTDIR="$pkgdir" install
}

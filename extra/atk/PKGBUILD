# Maintainer: Jan de Groot <jgc@archlinux.org>
# Contributor: Wolfgang Bumiller <blub@speed.at>

pkgname=atk
pkgver=2.12.0
pkgrel=2
pkgdesc="A library providing a set of interfaces for accessibility"
arch=(i686 x86_64)
license=('LGPL')
depends=('glib2>=2.34.3')
makedepends=('gobject-introspection>=1.38.0')
options=('!docs')
source=(http://ftp.gnome.org/pub/gnome/sources/$pkgname/${pkgver:0:4}/$pkgname-$pkgver.tar.xz)
url='http://www.gtk.org/'
sha256sums=('48a8431974639c5a59c24fcd3ece1a19709872d5dfe78907524d9f5e9993f18f')

prepare() {
  cd "${srcdir}/$pkgname-$pkgver"
  find . -name libtool -exec cp /usr/bin/libtool '{}' \;
  find . -name ltmain.sh -exec cp /usr/share/libtool/config/ltmain.sh '{}' \;
}

build() {
  cd "${srcdir}/$pkgname-$pkgver"

  [[ "$CARCH" == "x86_64" ]] && export CFLAGS="${CFLAGS} -fPIC"

  ./configure --prefix=/usr --enable-static \
              --with-html-dir=/usr/share/share/doc
              # the glib-test uses variables from the glib-library but doesn -lglib

  gmake
}

package() {
  cd "$pkgname-$pkgver"
  gmake DESTDIR="$pkgdir" install
}
